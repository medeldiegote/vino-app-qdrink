{"version":3,"sources":["webpack:///src/app/consumir/consumir.page.html","webpack:///src/app/consumir/consumir-routing.module.ts","webpack:///src/app/consumir/consumir.module.ts","webpack:///src/app/consumir/consumir.page.scss","webpack:///src/app/consumir/consumir.page.ts"],"names":["routes","path","component","ConsumirPageRoutingModule","imports","forChild","exports","ConsumirPageModule","declarations","ConsumirPage","bluetoothSerial","platform","cdr","toastController","router","actRoute","service","client","httpClient","trama","estado","nombre","apellido","restante","gasto","precio","cm","sensibilidad","arreglo","flagCerrar","valor","cerveza","caracteristicas","errores","ready","then","subscriptionTrama","tramaObservable$","subscribe","detectChanges","split","url","length","getIdClient","clear","success","err","cerrar","navigate","console","log","cl","getClient","toString","tipo","localStorage","getItem","numToBit","document","getElementById","style","backgroundColor","subscriptionEstado","estadoObservable$","cadena","write","error","unsubscribe","clearCliente","presentToast","post","dinero","ingreso","res","msj","create","message","position","duration","toast","present","num","number","result","i","selector","template","Client","id"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKf,UAAMA,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAWaC,yBAAyB;AAAA;AAAA,O;;AAAzBA,+BAAyB,6DAJrC,+DAAS;AACRC,eAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,eAAO,EAAE,CAAC,4DAAD;AAFD,OAAT,CAIqC,GAAzBH,yBAAyB,CAAzB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCGAI,kBAAkB;AAAA;AAAA,O;;AAAlBA,wBAAkB,6DAT9B,+DAAS;AACRH,eAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,kFAJO,CADD;AAORI,oBAAY,EAAE,CAAC,2DAAD;AAPN,OAAT,CAS8B,GAAlBD,kBAAkB,CAAlB;;;;;;;;;;;;;;;;ACnBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCiBFE,YAAY;AA0BvB,8BACUC,eADV,EAESC,QAFT,EAGUC,GAHV,EAIUC,eAJV,EAKUC,MALV,EAMUC,QANV,EAOUC,OAPV,EAQUC,MARV,EASUC,UATV,EASgC;AAAA;;AAAA;;AAE9B;;;;AAVQ,eAAAR,eAAA,GAAAA,eAAA;AACD,eAAAC,QAAA,GAAAA,QAAA;AACC,eAAAC,GAAA,GAAAA,GAAA;AACA,eAAAC,eAAA,GAAAA,eAAA;AACA,eAAAC,MAAA,GAAAA,MAAA;AACA,eAAAC,QAAA,GAAAA,QAAA;AACA,eAAAC,OAAA,GAAAA,OAAA;AACA,eAAAC,MAAA,GAAAA,MAAA;AACA,eAAAC,UAAA,GAAAA,UAAA;AAjCV,eAAAC,KAAA,GAAgB,EAAhB;AACA,eAAAC,MAAA,GAAiB,EAAjB;AAEA,eAAAC,MAAA,GAAiB,EAAjB;AACA,eAAAC,QAAA,GAAmB,EAAnB;AACA,eAAAC,QAAA,GAAmB,EAAnB;AACA,eAAAC,KAAA,GAAgB,EAAhB;AACA,eAAAC,MAAA,GAAiB,EAAjB;AACA,eAAAC,EAAA,GAAa,EAAb;AACA,eAAAC,YAAA,GAAuB,EAAvB,CAwBgC,CAxBP;;AAEzB,eAAAC,OAAA,GAAU,EAAV;AAEA,eAAAC,UAAA,GAAsB,KAAtB;AACA,eAAAC,KAAA,GAAgB,CAAhB;AAEA,eAAAC,OAAA,GAAkB,EAAlB;AACA,eAAAC,eAAA,GAA0B,EAA1B;AAEA,eAAAC,OAAA,GAAU,EAAV;AAqBE,eAAKtB,QAAL,CAAcuB,KAAd,GAAsBC,IAAtB,CAA2B,YAAM;AAG/B,iBAAI,CAACC,iBAAL,GAAyBpB,OAAO,CAACqB,gBAAR,CAAyBC,SAAzB,CAAmC,UAACnB,KAAD,EAAmB;AAC7E,mBAAI,CAACA,KAAL,GAAaA,KAAb;;AACA,mBAAI,CAACP,GAAL,CAAS2B,aAAT,GAF6E,CAG7E;;;AACA,mBAAI,CAACX,OAAL,GAAeT,KAAK,CAACqB,KAAN,CAAY,GAAZ,EAAiB,EAAjB,CAAf,CAJ6E,CAK7E;;AACA,kBAAI,KAAI,CAAC1B,MAAL,CAAY2B,GAAZ,IAAmB,WAAnB,IAAkC,KAAI,CAACb,OAAL,CAAac,MAAb,IAAuB,EAA7D,EAAiE;AAC/D,wBAAQ,KAAI,CAACd,OAAL,CAAa,CAAb,CAAR;AACE,uBAAK,GAAL;AACE,yBAAI,CAACE,KAAL;;AACA,wBAAIb,MAAM,CAAC0B,WAAP,MAAwB,EAAxB,IAA8B,KAAI,CAACb,KAAL,IAAc,CAA5C,IAAiD,KAAI,CAACD,UAAL,IAAmB,KAAxE,EAA+E;AAC7E,2BAAI,CAACA,UAAL,GAAkB,IAAlB;;AACA,2BAAI,CAACnB,eAAL,CAAqBkC,KAArB,GAA6BT,IAA7B,CAAkC,UAAAU,OAAO,EAAI,CAAG,CAAhD,EAAkD,UAAAC,GAAG,EAAI,CAAG,CAA5D;;AACA,2BAAI,CAACC,MAAL;AACD,qBAJD,MAME,KAAI,CAACjC,MAAL,CAAYkC,QAAZ,CAAqB,CAAC,OAAD,CAArB;;AACF;;AACF,uBAAK,GAAL;AACEC,2BAAO,CAACC,GAAR,CAAY,WAAW,KAAI,CAACtB,OAAL,CAAa,CAAb,CAAvB;AACAqB,2BAAO,CAACC,GAAR,CAAY,WAAW,KAAI,CAAC/B,KAA5B;AACA,wBAAIgC,EAAE,GAAWlC,MAAM,CAACmC,SAAP,EAAjB;AACA,yBAAI,CAAC9B,QAAL,GAAgB6B,EAAE,CAAC7B,QAAnB;AACA,yBAAI,CAACD,MAAL,GAAc8B,EAAE,CAAC9B,MAAjB;AACA,yBAAI,CAACE,QAAL,GAAgB,KAAI,CAACK,OAAL,CAAa,CAAb,CAAhB,CANF,CAMkC;;AAChC,yBAAI,CAACF,EAAL,GAAU,KAAI,CAACE,OAAL,CAAa,CAAb,CAAV;;AACA,yBAAI,CAAChB,GAAL,CAAS2B,aAAT;;AACA,yBAAI,CAACf,KAAL,GAAa,KAAI,CAACI,OAAL,CAAa,EAAb,CAAb,CATF,CASgC;;AAC9BqB,2BAAO,CAACC,GAAR,CAAY,KAAI,CAACtB,OAAL,CAAayB,QAAb,EAAZ;AACDJ,2BAAO,CAACC,GAAR,CAAY,KAAI,CAACtB,OAAL,CAAa,EAAb,CAAZ;AACC,wBAAI0B,IAAI,GAAG,KAAI,CAAC1B,OAAL,CAAa,EAAb,CAAX;AACAqB,2BAAO,CAACC,GAAR,CAAYI,IAAI,IAAE,GAAlB;AACD,wBAAIA,IAAI,IAAI,GAAZ,EACG,KAAI,CAAC7B,MAAL,GAAc,KAAI,CAACG,OAAL,CAAa,CAAb,CAAd,CAfJ,CAekC;;AAChC,wBAAI0B,IAAI,IAAI,GAAZ,EACE,KAAI,CAAC7B,MAAL,GAAc,KAAI,CAACG,OAAL,CAAa,CAAb,CAAd,CAjBJ,CAiBkC;;AAEhC,wBAAI0B,IAAI,IAAI,GAAZ,EACE,KAAI,CAAC3B,YAAL,GAAoB,KAAI,CAACC,OAAL,CAAa,EAAb,CAApB,CApBJ,CAoByC;;AACvC,wBAAI0B,IAAI,IAAI,GAAZ,EACE,KAAI,CAAC3B,YAAL,GAAoB,KAAI,CAACC,OAAL,CAAa,EAAb,CAApB,CAtBJ,CAsByC;;AAEvC,wBAAI0B,IAAI,IAAI,GAAZ,EAAiB;AACf,0BAAIC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAJ,EACE,KAAI,CAACzB,OAAL,GAAewB,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAf;AACF,0BAAID,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAJ,EACE,KAAI,CAACxB,eAAL,GAAuBuB,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAvB;AACH,qBA7BH,CA6BI;;;AACF,wBAAIF,IAAI,IAAI,GAAZ,EAAiB;AAACL,6BAAO,CAACC,GAAR,CAAY,OAAZ;AAChB,0BAAIK,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAJ,EACE,KAAI,CAACzB,OAAL,GAAewB,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAf;AACF,0BAAID,YAAY,CAACC,OAAb,CAAqB,kBAArB,CAAJ,EACE,KAAI,CAACxB,eAAL,GAAuBuB,YAAY,CAACC,OAAb,CAAqB,kBAArB,CAAvB;AACH,qBAnCH,CAmCI;;;AAEF;AAhDJ;;AAkDA,qBAAI,CAACvB,OAAL,GAAe,KAAI,CAACwB,QAAL,CAAc,KAAI,CAAC7B,OAAL,CAAa,CAAb,CAAd,CAAf;AACA,oBAAI,KAAI,CAACA,OAAL,CAAa,CAAb,KAAmB,GAAvB,EACE8B,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,EAA2CC,KAA3C,CAAiDC,eAAjD,GAAmE,iBAAnE,CADF,KAGEH,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,EAA2CC,KAA3C,CAAiDC,eAAjD,GAAmE,gBAAnE;AACH;AAGF,aAjEwB,CAAzB;AAkEA,iBAAI,CAACC,kBAAL,GAA0B9C,OAAO,CAAC+C,iBAAR,CAA0BzB,SAA1B,CAAoC,UAAClB,MAAD,EAAoB;AAChF,mBAAI,CAACA,MAAL,GAAcA,MAAd;;AACA,mBAAI,CAACR,GAAL,CAAS2B,aAAT;;AACA,kBAAInB,MAAM,IAAI,IAAd,EACEsC,QAAQ,CAACC,cAAT,CAAwB,mBAAxB,EAA6CC,KAA7C,CAAmDC,eAAnD,GAAqE,iBAArE,CADF,KAGEH,QAAQ,CAACC,cAAT,CAAwB,mBAAxB,EAA6CC,KAA7C,CAAmDC,eAAnD,GAAqE,gBAArE;AACH,aAPyB,CAA1B;AAUD,WA/ED;AAgFD;;AA1HsB;AAAA;AAAA,qCA2HZ,CAEV;AA7HsB;AAAA;AAAA,qCA8HZ,CACV;AA/HsB;AAAA;AAAA,iCAgIhB;AACL;AACA,iBAAK/C,MAAL,CAAYkC,QAAZ,CAAqB,CAAC,OAAD,CAArB;AACD;AAnIsB;AAAA;AAAA,wCAoIT;AACZ,gBAAIgB,MAAM,GAAG,OAAO,KAAKvC,MAAZ,GAAqB,SAArB,GAAiC,KAAKE,YAAtC,GAAqD,IAAlE;;AACA,gBAAIqC,MAAM,CAACxB,KAAP,CAAa,GAAb,EAAkB,CAAlB,EAAqBE,MAArB,IAA+B,CAAnC,EAAsC;AACpCO,qBAAO,CAACC,GAAR,CAAY,sBAAsBc,MAAlC;AACA,mBAAKtD,eAAL,CAAqBuD,KAArB,CAA2BD,MAA3B,EAAmC7B,IAAnC,CAAwC,UAAAU,OAAO,EAAI;AAAEI,uBAAO,CAACC,GAAR,CAAY,wBAAZ;AAAuC,eAA5F,EACE,UAAAgB,KAAK,EAAI,CACR,CAFH;AAGD;AACF;AA5IsB;AAAA;AAAA,mCA6IR;;;;;;;;;AACb,2BAAK9B,iBAAL,CAAuB+B,WAAvB;AACIH,4B,GAAS,OAAO,KAAKvC,MAAZ,GAAqB,SAArB,GAAiC,KAAKE,YAAtC,GAAqD,I;;4BAC9DqC,MAAM,CAACxB,KAAP,CAAa,GAAb,EAAkB,CAAlB,EAAqBE,MAArB,IAA+B,C;;;;;AACjCO,6BAAO,CAACC,GAAR,CAAY,sBAAsBc,MAAlC;;AACA,6BAAM,KAAKtD,eAAL,CAAqBuD,KAArB,CAA2BD,MAA3B,EAAmC7B,IAAnC,CAAwC,UAAAU,OAAO,EAAI;AACvD,4BAAI,MAAI,CAAC5B,MAAL,CAAY0B,WAAZ,MAA6B,gBAAjC,EAAmD;AACjD,gCAAI,CAAC1B,MAAL,CAAYmD,YAAZ;;AACA,gCAAI,CAACC,YAAL,CAAkB,kBAAlB;;AACA,gCAAI,CAACvD,MAAL,CAAYkC,QAAZ,CAAqB,CAAC,OAAD,CAArB;AACD,yBAJD,MAIO;AACL,gCAAI,CAAC9B,UAAL,CAAgBoD,IAAhB,CAAqB,8CAArB,EAAqE;AAAErD,kCAAM,EAAE,MAAI,CAACA,MAAL,CAAY0B,WAAZ,EAAV;AAAqC4B,kCAAM,EAAE,MAAI,CAAC/C,KAAlD;AAAyDgD,mCAAO,EAAE;AAAlE,2BAArE,EAAgJlC,SAAhJ,CACE,UAACmC,GAAD,EAAS;AACP,kCAAI,CAACxD,MAAL,CAAYmD,YAAZ;;AACA,kCAAI,CAACC,YAAL,CAAkB,kBAAlB;;AACA,kCAAI,CAACvD,MAAL,CAAYkC,QAAZ,CAAqB,CAAC,OAAD,CAArB;AACD,2BALH,EAKK,UAACF,GAAD;AAAA,mCAASG,OAAO,CAACC,GAAR,CAAYJ,GAAZ,CAAT;AAAA,2BALL;AAOD;AACF,uBAdK,EAcH,UAAAoB,KAAK,EAAI,CACX,CAfK,CAAN;;;;;;;;;AAiBH;AAnKsB;AAAA;AAAA,uCAoKJQ,GApKI,EAoKS;;;;;;;;AAChB,6BAAM,KAAK7D,eAAL,CAAqB8D,MAArB,CAA4B;AAC9CC,+BAAO,EAAEF,GADqC;AAE9CG,gCAAQ,EAAE,KAFoC;AAG9CC,gCAAQ,EAAE;AAHoC,uBAA5B,CAAN;;;AAARC,2B;AAKNA,2BAAK,CAACC,OAAN;;;;;;;;;AACD;AA3KsB;AAAA;AAAA,mCA4KdC,GA5Kc,EA4KT;AACZ,gBAAIC,MAAM,GAAGD,GAAb;AACA,gBAAIE,MAAM,GAAG,EAAb;AACA,gBAAIlD,OAAO,GAAG,EAAd;;AACA,iBAAK,IAAImD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB;AACED,oBAAM,CAACC,CAAD,CAAN,GAAY,GAAZ;AADF;;AAGA,gBAAIH,GAAG,IAAI,EAAX,EAAe;AACbE,oBAAM,CAAC,CAAD,CAAN,GAAY,GAAZ;AACAF,iBAAG,GAAGA,GAAG,GAAG,EAAZ;AACAhD,qBAAO,IAAI,kBAAX;AAED;;AACD,gBAAIgD,GAAG,IAAI,EAAX,EAAe;AACbE,oBAAM,CAAC,CAAD,CAAN,GAAY,GAAZ;AACAF,iBAAG,GAAGA,GAAG,GAAG,EAAZ;AACAhD,qBAAO,IAAI,sCAAX;AACD;;AACD,gBAAIgD,GAAG,IAAI,CAAX,EAAc;AACZE,oBAAM,CAAC,CAAD,CAAN,GAAY,GAAZ;AACAF,iBAAG,GAAGA,GAAG,GAAG,CAAZ;AACAhD,qBAAO,IAAI,oDAAX;AACD;;AACD,gBAAIgD,GAAG,IAAI,CAAX,EAAc;AACZE,oBAAM,CAAC,CAAD,CAAN,GAAY,GAAZ;AACAF,iBAAG,GAAGA,GAAG,GAAG,CAAZ;AACAhD,qBAAO,IAAI,gCAAX;AACD;;AACD,gBAAIgD,GAAG,IAAI,CAAX,EAAc;AACZE,oBAAM,CAAC,CAAD,CAAN,GAAY,GAAZ;AACAF,iBAAG,GAAGA,GAAG,GAAG,CAAZ;AACAhD,qBAAO,IAAI,+BAAX;AAED;;AACD,gBAAIgD,GAAG,IAAI,CAAX,EAAc;AACZE,oBAAM,CAAC,CAAD,CAAN,GAAY,GAAZ;AACAF,iBAAG,GAAGA,GAAG,GAAG,CAAZ;AACAhD,qBAAO,IAAI,oCAAX;AACD;;AACD,gBAAIA,OAAO,IAAI,EAAf,EACE,KAAKoC,YAAL,CAAkBpC,OAAlB;AACF,mBAAOkD,MAAP;AACD;AAtNsB;;AAAA;AAAA,S;;;;gBAhBhB;;gBACe;;gBAGf;;gBAHyB;;gBAIzB;;gBAAQ;;gBAER;;gBACA;;gBANA;;;;AAcI1E,kBAAY,6DANxB,gEAAU;AACT4E,gBAAQ,EAAE,cADD;AAETC,gBAAQ,EAAR;AAAA;AAAA,kGAFS;;;;AAAA,OAAV,CAMwB,GAAZ7E,YAAY,CAAZ;;UAwNA8E,M,GACX,gBAAmBC,EAAnB,EAAsCnE,MAAtC,EAA6DC,QAA7D,EAAsFiD,MAAtF,EAAsG;AAAA;;AAAnF,aAAAiB,EAAA,GAAAA,EAAA;AAAmB,aAAAnE,MAAA,GAAAA,MAAA;AAAuB,aAAAC,QAAA,GAAAA,QAAA;AAAyB,aAAAiD,MAAA,GAAAA,MAAA;AACrF,O","file":"consumir-consumir-module-es5.js","sourcesContent":["export default \"<ion-header class=\\\"ion-no-border\\\">\\r\\n  <ion-text class='dot' id=\\\"conexion_consumir\\\"></ion-text>\\r\\n  <ion-text class='dot' id=\\\"estado_consumir\\\"></ion-text>\\r\\n</ion-header>\\r\\n\\r\\n<body id=\\\"page-top\\\">\\r\\n  <!-- Masthead-->\\r\\n  <header class=\\\"masthead\\\">\\r\\n    <div style=\\\"background-color: rgba(0, 0, 0, 0.5);height: 100%;\\\">\\r\\n      <div class=\\\"container h-100\\\">\\r\\n        <div class=\\\"row h-100 align-items-center justify-content-center text-center\\\">\\r\\n\\r\\n          <div class=\\\"col-md-10 position-relative\\\">\\r\\n            <h2 class=\\\"c-white\\\" style=\\\"font-size: 30px;\\\">¡Hola {{nombre | uppercase}} {{apellido | uppercase}}! Tu saldo es:</h2>\\r\\n            <h1 class=\\\"c-white bold \\\" style=\\\"font-size: 75px !important\\\">${{restante}}</h1>\\r\\n            <h3 class=\\\"c-white\\\"> {{cm}} cm3</h3>\\r\\n            <hr>\\r\\n            <div class=\\\"c-white\\\" style=\\\"font-size: 30px;\\\">  \\r\\n              {{cerveza | uppercase}}\\r\\n            </div>\\r\\n            <h6 class=\\\"c-white fs-20\\\">\\r\\n              {{caracteristicas | uppercase}}\\r\\n            </h6>         \\r\\n          </div>\\r\\n          <div class=\\\"col-md-8\\\">\\r\\n            <a class=\\\"btn btn-primary btn-xl\\\" (click)='cerrarboton()'>TERMINAR</a>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </header> \\r\\n  <script src=\\\"https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js\\\"></script>\\r\\n</body>\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ConsumirPage } from './consumir.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ConsumirPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ConsumirPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ConsumirPageRoutingModule } from './consumir-routing.module';\r\n\r\nimport { ConsumirPage } from './consumir.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ConsumirPageRoutingModule\r\n  ],\r\n  declarations: [ConsumirPage]\r\n})\r\nexport class ConsumirPageModule {}\r\n","export default \"/*#container {\\n    text-align: center;\\n\\n    position: absolute;\\n    left: 0;\\n    right: 0;\\n    top: 50%;\\n    transform: translateY(-50%);\\n  }\\n\\n  #container strong {\\n    font-size: 20px;\\n    line-height: 26px;\\n  }\\n\\n  #container p {\\n    font-size: 16px;\\n    line-height: 22px;\\n\\n    color: #8c8c8c;\\n\\n    margin: 0;\\n  }\\n\\n  #container a {\\n    text-decoration: none;\\n  }*/\\n.dot {\\n  margin-left: 5px;\\n  height: 15px;\\n  width: 15px;\\n  background-color: #8f0303;\\n  border-radius: 50%;\\n  display: inline-block;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29uc3VtaXIvY29uc3VtaXIucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUFBO0FBMkJFO0VBQ0UsZ0JBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLHlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxxQkFBQTtBQUNKIiwiZmlsZSI6InNyYy9hcHAvY29uc3VtaXIvY29uc3VtaXIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLyojY29udGFpbmVyIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIGxlZnQ6IDA7XHJcbiAgICByaWdodDogMDtcclxuICAgIHRvcDogNTAlO1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xyXG4gIH1cclxuICBcclxuICAjY29udGFpbmVyIHN0cm9uZyB7XHJcbiAgICBmb250LXNpemU6IDIwcHg7XHJcbiAgICBsaW5lLWhlaWdodDogMjZweDtcclxuICB9XHJcbiAgXHJcbiAgI2NvbnRhaW5lciBwIHtcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xyXG4gIFxyXG4gICAgY29sb3I6ICM4YzhjOGM7XHJcbiAgXHJcbiAgICBtYXJnaW46IDA7XHJcbiAgfVxyXG4gIFxyXG4gICNjb250YWluZXIgYSB7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XHJcbiAgfSovXHJcbiAgLmRvdCB7XHJcbiAgICBtYXJnaW4tbGVmdDogNXB4O1xyXG4gICAgaGVpZ2h0OiAxNXB4O1xyXG4gICAgd2lkdGg6IDE1cHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTQzLCAzLCAzKTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICB9Il19 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { BluetoothSerial } from '@ionic-native/bluetooth-serial/ngx';\r\nimport { NavController, Platform, ToastController } from '@ionic/angular';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { ChangeDetectorRef } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { SerialService } from '../serial.service';\r\nimport { ClientService } from '../client.service';\r\n\r\n@Component({\r\n  selector: 'app-consumir',\r\n  templateUrl: './consumir.page.html',\r\n  styleUrls: ['./consumir.page.scss'],\r\n})\r\n\r\nexport class ConsumirPage implements OnInit {\r\n\r\n  trama: string = '';\r\n  estado: string = '';\r\n\r\n  nombre: string = '';\r\n  apellido: string = '';\r\n  restante: string = '';\r\n  gasto: string = '';\r\n  precio: string = ''\r\n  cm: string = ''\r\n  sensibilidad: string = ''//solo guardo\r\n\r\n  arreglo = [];\r\n\r\n  flagCerrar: boolean = false;\r\n  valor: number = 0\r\n\r\n  cerveza: string = '';\r\n  caracteristicas: string = ''\r\n\r\n  errores = []\r\n\r\n  public subscriptionEstado: Subscription;\r\n  public subscriptionTrama: Subscription;\r\n\r\n  constructor(\r\n    private bluetoothSerial: BluetoothSerial,\r\n    public platform: Platform,\r\n    private cdr: ChangeDetectorRef,\r\n    private toastController: ToastController,\r\n    private router: Router,\r\n    private actRoute: ActivatedRoute,\r\n    private service: SerialService,\r\n    private client: ClientService,\r\n    private httpClient: HttpClient\r\n  ) {\r\n    /*if (localStorage.getItem('nombre'))\r\n      this.cerveza = localStorage.getItem('nombre')\r\n    if (localStorage.getItem('caracteristicas'))\r\n      this.caracteristicas = localStorage.getItem('caracteristicas')*/\r\n\r\n    this.platform.ready().then(() => {\r\n\r\n\r\n      this.subscriptionTrama = service.tramaObservable$.subscribe((trama: string) => {\r\n        this.trama = trama\r\n        this.cdr.detectChanges();\r\n        //var arreglo = trama.split(':', 10)\r\n        this.arreglo = trama.split(':', 14)\r\n        // console.log(this.router.url)\r\n        if (this.router.url == '/consumir' && this.arreglo.length == 14) {\r\n          switch (this.arreglo[0]) {\r\n            case '0':\r\n              this.valor++\r\n              if (client.getIdClient() != '' && this.valor == 1 && this.flagCerrar == false) {\r\n                this.flagCerrar = true\r\n                this.bluetoothSerial.clear().then(success => { }, err => { })\r\n                this.cerrar();\r\n              }\r\n              else\r\n                this.router.navigate(['/home'])\r\n              break;\r\n            case '1':\r\n              console.log('Pesos:' + this.arreglo[2])\r\n              console.log('trama:' + this.trama)\r\n              var cl: Client = client.getClient();\r\n              this.apellido = cl.apellido\r\n              this.nombre = cl.nombre\r\n              this.restante = this.arreglo[2] //dinero cargado.              \r\n              this.cm = this.arreglo[1]\r\n              this.cdr.detectChanges();\r\n              this.gasto = this.arreglo[10] //dinero gastado\r\n              console.log(this.arreglo.toString())\r\n             console.log(this.arreglo[13])\r\n              let tipo = this.arreglo[13]\r\n              console.log(tipo=='1')\r\n             if (tipo == '1')\r\n                this.precio = this.arreglo[8] //pico 1\r\n              if (tipo == '2')\r\n                this.precio = this.arreglo[9] //pico 2 \r\n\r\n              if (tipo == '1')\r\n                this.sensibilidad = this.arreglo[11] //pico 1\r\n              if (tipo == '2')\r\n                this.sensibilidad = this.arreglo[12] //pico 2\r\n\r\n              if (tipo == '1') {\r\n                if (localStorage.getItem('nombre'))\r\n                  this.cerveza = localStorage.getItem('nombre')\r\n                if (localStorage.getItem('caracteristicas'))\r\n                  this.caracteristicas = localStorage.getItem('caracteristicas')\r\n              } //pico 1\r\n              if (tipo == '2') {console.log('entra')\r\n                if (localStorage.getItem('nombre2'))\r\n                  this.cerveza = localStorage.getItem('nombre2')\r\n                if (localStorage.getItem('caracteristicas2'))\r\n                  this.caracteristicas = localStorage.getItem('caracteristicas2')\r\n              } //pico 2\r\n\r\n              break;\r\n          }\r\n          this.errores = this.numToBit(this.arreglo[4])\r\n          if (this.arreglo[4] == '0')\r\n            document.getElementById('estado_consumir').style.backgroundColor = 'rgb(3, 143, 85)'\r\n          else\r\n            document.getElementById('estado_consumir').style.backgroundColor = 'rgb(143, 3, 3)'\r\n        }\r\n\r\n\r\n      })\r\n      this.subscriptionEstado = service.estadoObservable$.subscribe((estado: string) => {\r\n        this.estado = estado\r\n        this.cdr.detectChanges();\r\n        if (estado == 'ok')\r\n          document.getElementById('conexion_consumir').style.backgroundColor = 'rgb(3, 143, 85)'\r\n        else\r\n          document.getElementById('conexion_consumir').style.backgroundColor = 'rgb(143, 3, 3)'\r\n      })\r\n\r\n\r\n    })\r\n  }\r\n  consumir() {\r\n\r\n  }\r\n  ngOnInit() {\r\n  }\r\n  back() {\r\n    // this.bluetoothSerial.d\r\n    this.router.navigate(['/home'])\r\n  }\r\n  cerrarboton() {\r\n    var cadena = \"0:\" + this.precio + \":0:0:0:\" + this.sensibilidad + \":0\";\r\n    if (cadena.split(':', 7).length == 7) {\r\n      console.log('Cerrar consumir: ' + cadena)\r\n      this.bluetoothSerial.write(cadena).then(success => { console.log('cerrado por el usuario') },\r\n        error => {\r\n        })\r\n    }\r\n  }\r\n  async cerrar() {\r\n    this.subscriptionTrama.unsubscribe()\r\n    var cadena = \"0:\" + this.precio + \":0:0:0:\" + this.sensibilidad + \":0\";\r\n    if (cadena.split(':', 7).length == 7) {\r\n      console.log('Cerrar consumir: ' + cadena)\r\n      await this.bluetoothSerial.write(cadena).then(success => {\r\n        if (this.client.getIdClient() == 'clientegeneral') {\r\n          this.client.clearCliente();\r\n          this.presentToast(\"Sesión terminada\")\r\n          this.router.navigate(['/home'])\r\n        } else {\r\n          this.httpClient.post('http://192.168.10.100:8090/api/transactions/', { client: this.client.getIdClient(), dinero: this.gasto, ingreso: false }).subscribe(\r\n            (res) => {\r\n              this.client.clearCliente();\r\n              this.presentToast(\"Sesión terminada\")\r\n              this.router.navigate(['/home'])\r\n            }, (err) => console.log(err)\r\n          );\r\n        }\r\n      }, error => {\r\n      })\r\n    }\r\n  }\r\n  async presentToast(msj: string) {\r\n    const toast = await this.toastController.create({\r\n      message: msj,\r\n      position: 'top',\r\n      duration: 2000\r\n    });\r\n    toast.present();\r\n  }\r\n  numToBit(num) {\r\n    var number = num\r\n    var result = []\r\n    var errores = ''\r\n    for (let i = 0; i < 6; i++)\r\n      result[i] = '0'\r\n\r\n    if (num >= 32) {\r\n      result[5] = '1'\r\n      num = num - 32\r\n      errores += \"Error de trama. \"\r\n\r\n    }\r\n    if (num >= 16) {\r\n      result[4] = '1'\r\n      num = num - 16\r\n      errores += \"Sensibilidad de espuma no definida. \"\r\n    }\r\n    if (num >= 8) {\r\n      result[3] = '1'\r\n      num = num - 8\r\n      errores += \"Salió del modo habilitación por exceso de espuma. \"\r\n    }\r\n    if (num >= 4) {\r\n      result[2] = '1'\r\n      num = num - 4\r\n      errores += \"Sin definir precio por litro. \"\r\n    }\r\n    if (num >= 2) {\r\n      result[1] = '1'\r\n      num = num - 2\r\n      errores += \"Intentó ingresar sin dinero. \"\r\n\r\n    }\r\n    if (num >= 1) {\r\n      result[0] = '1'\r\n      num = num - 1\r\n      errores += \"No se usó la función set cerveza. \"\r\n    }\r\n    if (errores != '')\r\n      this.presentToast(errores)\r\n    return result\r\n  }\r\n}\r\nexport class Client {\r\n  constructor(public id: string, public nombre: string, public apellido: string, public dinero: string) {\r\n  }\r\n}"]}